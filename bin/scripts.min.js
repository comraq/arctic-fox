!function t(e,n,o){function i(u,c){if(!n[u]){if(!e[u]){var f="function"==typeof require&&require;if(!c&&f)return f(u,!0);if(r)return r(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var l=n[u]={exports:{}};e[u][0].call(l.exports,function(t){var n=e[u][1][t];return i(n?n:t)},l,l.exports,t,e,n,o)}return n[u].exports}for(var r="function"==typeof require&&require,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(t,e,n){function o(t){return new Promise(function(e,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){4==o.readyState&&(200==o.status?e(o.responseText):n(o.status))},o.open("GET",t),o.send()})}function i(t,e){var n=o(e);return n.then(function(e){return t.innerHTML=e,t},function(e){var n="Failed to load template!";t.innerHTML=n,alert("Status: "+e+"! "+n)})}!function(e,n){var r=t("./pubsub")(),u=t("./models"),c=t("./controllers"),f=t("./views"),a={events:r,ajax:o,loadTemplate:i};!function(){var t,e,n;u.modelFactory(a).then(function(o){t=o;for(var i in c)e=c[i](a,t),n=f[i](e)},function(t){alert(t)})}()}(window,document)},{"./controllers":4,"./models":7,"./pubsub":8,"./views":11}],2:[function(t,e,n){e.exports=function(t,e){var n=Object.create(t);return n}},{}],3:[function(t,e,n){e.exports=function(t,e){var n=Object.create(t);return n.getCountServer=function(){return this.ajax(e.getCountServer()).then(function(t){return t=JSON.parse(t),t.count},function(t){throw new Error("Could not retrieve views count!")})},n}},{}],4:[function(t,e,n){n.title=t("./titleController"),n.details=t("./detailsController"),n.info=t("./infoController"),n.footer=t("./footerController")},{"./detailsController":2,"./footerController":3,"./infoController":5,"./titleController":6}],5:[function(t,e,n){e.exports=function(t,e){var n=Object.create(t);return n.getInfo=function(){return e.getInfo()},n}},{}],6:[function(t,e,n){e.exports=function(t,e){function n(){o=e.getFoxes(),o.forEach(function(t){t.display=!1})}var o,i=Object.create(t);i.getTitle=function(){return e.getTitle()};var r=0;return i.getNextFox=function(t){var e=parseInt(t);isNaN(e)||(o[e].display=!1,r=(e+1)%o.length);var n,i;do n=o[r],i=r,r=(r+1)%o.length;while(n.display);return n.display=!0,{name:n.name,imgUrl:n.imgUrl,facts:n.facts,sound:n.sound,id:i}},function(){n()}(),i}},{}],7:[function(t,e,n){n.modelFactory=function(t){var e,n="static/img/",o="static/sounds/",i="static/data.json";return t.ajax(i).then(function(t){return e=JSON.parse(t),e.foxes.forEach(function(t){t.imgUrl=n+t.imgUrl,t.sound=o+t.sound}),e.info.imgUrl=n+e.info.imgUrl,{getTitle:function(){return e.title},getFoxes:function(){return e.foxes},getInfo:function(){return e.info},getCountServer:function(){return e.countServer.host+e.countServer.url}}},function(t){var e="Failed to Retrieve Data from json!";throw console.log(e),new Error(e)})}},{}],8:[function(t,e,n){e.exports=function(){var t={};return{on:function(e,n){t[e]=t[e]||[],t[e].push(n)},off:function(e,n){t[e]&&(t[e]=t[e].filter(function(t){return!(n===t)}))},emit:function(e,n){t[e]&&t[e].forEach(function(t){t(n)})}}}},{}],9:[function(t,e,n){e.exports=function(t){function e(e){o=$("#"+l+"-name")[0],i=$("#"+l+"-img-view")[0],r=$("#"+l+"-facts-body")[0],u=$("#"+l+"-back-button")[0],c=$("#"+l+"-sound-button")[0],t.events.on("title-picture-clicked",function(t){a&&a.pause(),f=t,$(n).addClass("view-details-show"),o.innerHTML=t.name,i.setAttribute("src",t.imgUrl),r.innerHTML=t.facts}),t.events.on("details-closed",function(){a&&a.pause(),$(n).removeClass("view-details-show")}),c.addEventListener("click",function(){a&&!a.paused||(a=new Audio(f.sound),a.play())}),u.addEventListener("click",function(){t.events.emit("details-closed")})}var n,o,i,r,u,c,f,a,l="view-details";return function(){n=document.getElementById(l),t.loadTemplate(n,"app/views/details/details.html").then(e)}(),this}},{}],10:[function(t,e,n){e.exports=function(t){function e(e){o=$("#"+i+"-visits-count")[0],t.getCountServer().then(function(t){o.innerHTML=t},function(t){o.innerHTML="n/a"})}var n,o,i="view-footer";return function(){n=document.getElementById(i),t.loadTemplate(n,"app/views/footer/footer.html").then(e)}(),this}},{}],11:[function(t,e,n){n.title=t("./title"),n.details=t("./details"),n.info=t("./info"),n.footer=t("./footer")},{"./details":9,"./footer":10,"./info":12,"./title":13}],12:[function(t,e,n){e.exports=function(t){function e(e){o=$("#"+u+"-list")[0],i=$("#"+u+"-img")[0],r=t.getInfo(),r.facts.forEach(function(t,e){var n=o.children[0],i=n.innerHTML;e>0&&(n=n.cloneNode(),n.innerHTML=i,o.appendChild(n)),n.setAttribute("data-content",t),$(n).popover()}),i.setAttribute("src",r.imgUrl),i.setAttribute("title",r.imgCaption),t.events.on("title-picture-clicked",function(t){$(n).addClass("view-info-hide")}),t.events.on("details-closed",function(){$(n).removeClass("view-info-hide")})}var n,o,i,r,u="view-info";return function(){n=document.getElementById(u),t.loadTemplate(n,"app/views/info/info.html").then(e)}(),this}},{}],13:[function(t,e,n){e.exports=function(t){function e(e){for(var o,i,r=0;r<e.children.length;++r)switch(child=e.children[r],child.id){case"img-group":o=child;break;case"title":i=child}i.innerHTML=t.getTitle();for(var r=0;r<o.children.length;++r){var u=o.children[r];!function(e){n(e,function(){return t.getNextFox(e.getAttribute("fox-id"))})}(u)}}function n(e,n){var o=n();e.setAttribute("src",o.imgUrl),e.setAttribute("fox-id",o.id);var i=$(e);i.on("click",function(){var r=$.Deferred();$(this).fadeOut(500,function(){t.events.emit("title-picture-clicked",o),r.resolve()}),r.then(function(){o=n(),e.setAttribute("src",o.imgUrl),e.setAttribute("fox-id",o.id),i.fadeIn(500)})})}var o,i="view-title";return function(){o=document.getElementById(i),t.loadTemplate(o,"app/views/title/title.html").then(e)}(),this}},{}]},{},[1]);
//# sourceMappingURL=scripts/scripts.min.js.map
