{"version":3,"sources":["scripts.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","getFile","path","Promise","resolve","reject","xmlhttp","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","send","loadTemplate","viewGroup","templatePath","promise","then","data","innerHTML","err","msg","alert","window","document","events","models","controllers","views","controllerInterface","model","controller","view","modelFactory","prop","./controllers","./models","./pubsub","./views","2","Object","create","3","title","details","info","./detailsController","./infoController","./titleController","4","getInfo","5","getFoxes","foxes","forEach","fox","display","getTitle","index","getNextFox","indexVal","parseInt","isNaN","id","name","imgUrl","facts","sound","6","imgPath","soundPath","images","sounds","img","match","push","7","on","eventName","func","off","filter","handler","emit","8","onTemplateLoaded","root","nameView","$","imgView","factsView","backButton","soundButton","pause","currFox","addClass","setAttribute","removeClass","addEventListener","paused","Audio","play","getElementById","this","9","./details","./info","./title","10","contentView","11","imgGroupView","titleView","children","child","initImg","getAttribute","getFox","$img","dfd","Deferred","fadeOut","fadeIn"],"mappings":"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","file":"../scripts.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function(window, document) {\n  var events = require(\"./pubsub\")(),\n      models = require(\"./models\"),\n      controllers = require(\"./controllers\"),\n      views = require(\"./views\");\n\n  var controllerInterface = {\n    events: events,\n    getFile: getFile,\n    loadTemplate: loadTemplate\n  };\n\n  (function init() {\n    var model, controller, view;\n    model = models.modelFactory();\n\n    for (var prop in controllers) {\n      controller = controllers[prop](controllerInterface, model);\n      view = views[prop](controller);\n    }\n  })();\n\n})(window, document);\n\nfunction getFile(path) {\n  return new Promise(function(resolve, reject) {\n    var xmlhttp = new XMLHttpRequest();\n \n    xmlhttp.onreadystatechange = function() {\n      if (xmlhttp.readyState == 4) {\n        if (xmlhttp.status == 200)\n          resolve(xmlhttp.responseText);\n        else\n          reject(xmlhttp.status);\n      }\n    }\n\n    xmlhttp.open(\"GET\", path);\n    xmlhttp.send();\n  });\n}\n\nfunction loadTemplate(viewGroup, templatePath) {\n  var promise = getFile(templatePath);\n\n  return promise.then(function success(data) {\n    viewGroup.innerHTML = data;\n    return viewGroup;\n\n  }, function error(err) {\n    var msg = \"Failed to load template!\";\n    viewGroup.innerHTML = msg;\n    alert(\"Status: \" + err + \"! \" + msg);\n  });\n}\n\n},{\"./controllers\":3,\"./models\":6,\"./pubsub\":7,\"./views\":9}],2:[function(require,module,exports){\nmodule.exports = function(controllerInterface, model) {\n  var controller = Object.create(controllerInterface);\n  return controller;\n};\n\n},{}],3:[function(require,module,exports){\nexports.title = require(\"./titleController\");\n\nexports.details = require(\"./detailsController\");\n\nexports.info = require(\"./infoController\");\n\n},{\"./detailsController\":2,\"./infoController\":4,\"./titleController\":5}],4:[function(require,module,exports){\nmodule.exports = function(controllerInterface, model) {\n  var controller = Object.create(controllerInterface);\n\n  controller.getInfo = function getInfo() {\n    return model.getInfo();\n  };\n\n  return controller;\n};\n\n},{}],5:[function(require,module,exports){\nmodule.exports = function(controllerInterface, model) {\n  var controller = Object.create(controllerInterface);\n  var foxes;\n\n  function getFoxes() {\n    foxes = model.getFoxes();\n    foxes.forEach(function (fox) {\n      fox.display = false;\n    });\n  }\n\n  controller.getTitle = function getTitle() {\n    return model.title;\n  };\n\n  var index = 0;\n  controller.getNextFox = function getNextFox(i) {\n    var indexVal = parseInt(i);\n    if (!isNaN(indexVal)) {\n      foxes[indexVal].display = false;\n      index = (indexVal + 1) % foxes.length;\n    }\n\n    var fox, id;\n    do {\n      fox = foxes[index];\n      id = index;\n      index = (index + 1) % foxes.length;\n    } while (fox.display);\n\n    fox.display = true;\n    return {\n      name: fox.name,\n      imgUrl: fox.imgUrl,\n      facts: fox.facts,\n      sound: fox.sound,\n      id: id \n    };\n  };\n\n  // Initialization of this instance\n  (function init() {\n    getFoxes();\n  })();\n  return controller;\n}\n\n},{}],6:[function(require,module,exports){\nexports.modelFactory = function() {\n  var imgPath = \"static/img/\";\n  var soundPath = \"static/sounds/\";\n\n  var images = [\n    \"fox0.gif\",\n    \"fox1.jpg\",\n    \"fox2.jpg\",\n    \"fox3.jpg\",\n    \"fox4.jpg\"\n  ];\n\n  var sounds = [\n    \"fox-barks.mp3\",\n    \"fox-howls.mp3\",\n    \"fox-cubs.mp3\",\n    \"fox-warning-alarm.mp3\",\n    \"fox-playfighting.mp3\"\n  ];\n\n  var foxes = [];\n  images.forEach(function(img, i) {\n    var name = img.match(/(^.+)\\./)[1];\n\n    foxes.push({\n      name: name,\n      imgUrl: imgPath + img,\n      facts: name + \" facts\",\n      sound: soundPath + sounds[i]\n    });\n  });\n\n  var info = \"Some basic information regarding arctic foxes.\";\n\n  return {\n    title: \"Welcome To Ashley's Arctic Fox Website\",\n    getFoxes: function getFoxes() {\n      return foxes;\n    },\n    getInfo: function getInfo() {\n      return info;\n    }\n  };\n};\n\n},{}],7:[function(require,module,exports){\nmodule.exports = function() {\n  var events = {};\n\n  return {\n    on: function on(eventName, func) {\n      events[eventName] = events[eventName] || [];\n      events[eventName].push(func);\n    },\n    off: function off(eventName, func) {\n      if (events[eventName]) {\n        events[eventName] = events[eventName].filter(function(handler) {\n          return !(func === handler);\n        })\n      }\n    },\n    emit: function emit(eventName, data) {\n      if (events[eventName]) {\n        events[eventName].forEach(function(handler) {\n          handler(data);\n        });\n      }\n    }\n  };\n};\n\n},{}],8:[function(require,module,exports){\nmodule.exports = function(controller) {\n  var id = \"view-details\";\n  var viewGroup, nameView, imgView, factsView, backButton, soundButton;\n  var currFox;\n  var sound;\n  \n  function onTemplateLoaded(root) {\n    nameView = $(\"#\" + id + \"-name\")[0];\n    imgView = $(\"#\" + id + \"-img-view\")[0];\n    factsView = $(\"#\" + id + \"-facts-body\")[0];\n    backButton = $(\"#\" + id + \"-back-button\")[0];\n    soundButton = $(\"#\" + id + \"-sound-button\")[0];\n\n    controller.events.on(\"title-picture-clicked\", function(fox) {\n      if (sound)\n        sound.pause();\n\n      currFox = fox;\n      $(viewGroup).addClass(\"view-details-show\");\n\n      nameView.innerHTML = fox.name;\n      imgView.setAttribute(\"src\", fox.imgUrl);\n      factsView.innerHTML = fox.facts;\n\n    }); \n\n    controller.events.on(\"details-closed\", function() {\n      if (sound)\n        sound.pause();\n\n      $(viewGroup).removeClass(\"view-details-show\");\n    });\n\n    soundButton.addEventListener(\"click\", function() {\n      if (!sound || sound.paused) {\n        sound = new Audio(currFox.sound);\n        sound.play();\n      }\n    });\n\n    backButton.addEventListener(\"click\", function() {\n      controller.events.emit(\"details-closed\");\n    });\n  }\n\n  (function init() {\n    viewGroup = document.getElementById(id);\n    controller.loadTemplate(viewGroup, \"app/views/details/details.html\")\n      .then(onTemplateLoaded);\n  })();\n  return this;\n};\n\n},{}],9:[function(require,module,exports){\nexports.title = require(\"./title\");\n\nexports.details = require(\"./details\");\n\nexports.info = require(\"./info\");\n\n},{\"./details\":8,\"./info\":10,\"./title\":11}],10:[function(require,module,exports){\nmodule.exports = function(controller) {\n  var id = \"view-info\";\n  var viewGroup, contentView;\n\n  function onTemplateLoaded(root) {\n    contentView = $(\"#\" + id + \"-content\")[0];\n    contentView.innerHTML = controller.getInfo();\n\n    controller.events.on(\"title-picture-clicked\", function(fox) {\n      $(viewGroup).addClass(\"view-info-hide\");\n    });\n\n    controller.events.on(\"details-closed\", function() {\n      $(viewGroup).removeClass(\"view-info-hide\");\n    });\n  }\n\n  (function init() {\n    viewGroup = document.getElementById(id);\n    controller.loadTemplate(viewGroup, \"app/views/info/info.html\")\n      .then(onTemplateLoaded);\n  })();\n  return this;\n};\n\n},{}],11:[function(require,module,exports){\nmodule.exports = function(controller) {\n  var id = \"view-title\";\n  var viewGroup;\n  \n  function onTemplateLoaded(root) {\n    var imgGroupView, titleView;\n  \n    for (var i = 0; i < root.children.length; ++i) {\n      child = root.children[i];\n      switch(child.id) {\n        case \"img-group\":\n          imgGroupView = child;\n          break;\n  \n        case \"title\":\n          titleView = child;\n          break;\n\n        default:\n          // Default\n      }\n    }\n    titleView.innerHTML = controller.getTitle();\n    for (var i = 0; i < imgGroupView.children.length; ++i) {\n      var img = imgGroupView.children[i]; \n      (function(img) {\n        initImg(img, function() {\n          return controller.getNextFox(img.getAttribute(\"fox-id\"));\n        });\n      })(img);\n    }\n  }\n\n  function initImg(img, getFox) {\n    var fox = getFox();\n    img.setAttribute(\"src\", fox.imgUrl);\n    img.setAttribute(\"fox-id\", fox.id);\n  \n    var $img = $(img);\n    $img.on(\"click\", function() {\n      var dfd = $.Deferred();\n\n      $(this).fadeOut(500, function() {\n        controller.events.emit(\"title-picture-clicked\", fox);\n        dfd.resolve();\n      });\n\n      dfd.then(function success() {\n        fox = getFox();\n        img.setAttribute(\"src\", fox.imgUrl);\n        img.setAttribute(\"fox-id\", fox.id);\n        $img.fadeIn(500);            \n      })\n    })\n  }\n\n  (function init() {\n    viewGroup = document.getElementById(id);\n    controller.loadTemplate(viewGroup, \"app/views/title/title.html\")\n      .then(onTemplateLoaded);\n  })();\n  \n  return this;\n};\n\n},{}]},{},[1]);\n"]}