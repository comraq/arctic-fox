{"version":3,"sources":["scripts.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","controllerInterface","model","controller","Object","create","2","title","details","./detailsController","./titleController","3","getFoxes","foxes","forEach","fox","display","getTitle","index","getNextImage","currImg","imgUrl","img","4","getFile","path","Promise","resolve","reject","xmlhttp","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","send","loadTemplate","viewGroup","templatePath","promise","then","data","innerHTML","err","msg","alert","window","document","events","models","controllers","views","view","modelFactory","prop","./controllers","./models","./pubsub","./views","5","images","caption","match","push","6","on","eventName","func","off","filter","handler","emit","7","onTemplateLoaded","root","children","child","id","nameView","imgView","setAttribute","getElementById","this","8","./details","./title","9","imgGroupView","titleView","initImg","getAttribute","getPathFunc","$img","$","dfd","Deferred","fadeOut","fadeIn"],"mappings":"CAAA,QAAUA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIK,GAAE,GAAIC,OAAM,uBAAuBN,EAAE,IAAK,MAAMK,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEX,EAAEG,IAAIS,WAAYb,GAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGS,QAAkD,IAAI,GAA1CL,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKa,GAAG,SAAST,EAAQU,EAAOJ,GACvdI,EAAOJ,QAAU,SAASK,EAAqBC,GAC7C,GAAIC,GAAaC,OAAOC,OAAOJ,EAC/B,OAAOE,SAGHG,GAAG,SAAShB,EAAQU,EAAOJ,GACjCA,EAAQW,MAAQjB,EAAQ,qBAExBM,EAAQY,QAAUlB,EAAQ,yBAEvBmB,sBAAsB,EAAEC,oBAAoB,IAAIC,GAAG,SAASrB,EAAQU,EAAOJ,GAC9EI,EAAOJ,QAAU,SAASK,EAAqBC,GAI7C,QAASU,KACPC,EAAQX,EAAMU,WACdC,EAAMC,QAAQ,SAAUC,GACtBA,EAAIC,SAAU,IANlB,GACIH,GADAV,EAAaC,OAAOC,OAAOJ,EAU/BE,GAAWc,SAAW,WACpB,MAAOf,GAAMK,MAGf,IAAIW,GAAQ,CAwBZ,OAvBAf,GAAWgB,aAAe,SAAsBC,GAC9C,GAAIL,EACJ,GACEA,GAAMF,EAAMK,GACZA,GAASA,EAAQ,GAAKL,EAAMf,aACrBiB,EAAIC,QAEb,KAAK,GAAIzB,GAAI,EAAGA,EAAIsB,EAAMf,SAAUP,EAClC,GAAIsB,EAAMtB,GAAG8B,QAAUD,EAAS,CAC9BP,EAAMtB,GAAGyB,SAAU,CACnB,OAIJ,GAAIM,GAAMP,EAAIM,MAEd,OADAN,GAAIC,SAAU,EACPM,GAIT,WACEV,OAEKT,QAGHoB,GAAG,SAASjC,EAAQU,EAAOJ,GAyBjC,QAAS4B,GAAQC,GACf,MAAO,IAAIC,SAAQ,SAASC,EAASC,GACnC,GAAIC,GAAU,GAAIC,eAElBD,GAAQE,mBAAqB,WACD,GAAtBF,EAAQG,aACY,KAAlBH,EAAQI,OACVN,EAAQE,EAAQK,cAEhBN,EAAOC,EAAQI,UAIrBJ,EAAQM,KAAK,MAAOV,GACpBI,EAAQO,SAIZ,QAASC,GAAaC,EAAWC,GAC/B,GAAIC,GAAUhB,EAAQe,EAEtB,OAAOC,GAAQC,KAAK,SAAiBC,GAEnC,MADAJ,GAAUK,UAAYD,EACfJ,GAEN,SAAeM,GAChB,GAAIC,GAAM,0BACVP,GAAUK,UAAYE,EACtBC,MAAM,WAAaF,EAAM,KAAOC,MApDpC,SAAUE,EAAQC,GAChB,GAAIC,GAAS3D,EAAQ,cACjB4D,EAAS5D,EAAQ,YACjB6D,EAAc7D,EAAQ,iBACtB8D,EAAQ9D,EAAQ,WAEhBW,GACFgD,OAAQA,EACRzB,QAASA,EACTa,aAAcA,IAGhB,WACE,GAAInC,GAAOC,EAAYkD,CACvBnD,GAAQgD,EAAOI,cAEf,KAAK,GAAIC,KAAQJ,GACfhD,EAAagD,EAAYI,GAAMtD,EAAqBC,GACpDmD,EAAOD,EAAMG,GAAMpD,OAItB4C,OAAQC,YAkCRQ,gBAAgB,EAAEC,WAAW,EAAEC,WAAW,EAAEC,UAAU,IAAIC,GAAG,SAAStE,EAAQU,EAAOJ,GACxFA,EAAQ0D,aAAe,WACrB,GAAI7B,GAAO,cACPoC,GACF,WACA,WACA,WACA,WACA,YAGEhD,IASJ,OARAgD,GAAO/C,QAAQ,SAASQ,GACtB,GAAIP,IACF+C,QAASxC,EAAIyC,MAAM,WAAW,GAC9B1C,OAAQI,EAAOH,EAEjBT,GAAMmD,KAAKjD,MAIXR,MAAO,yCACPK,SAAU,WACR,MAAOC,WAKPoD,GAAG,SAAS3E,EAAQU,EAAOJ,GACjCI,EAAOJ,QAAU,WACf,GAAIqD,KAEJ,QACEiB,GAAI,SAAYC,EAAWC,GACzBnB,EAAOkB,GAAalB,EAAOkB,OAC3BlB,EAAOkB,GAAWH,KAAKI,IAEzBC,IAAK,SAAaF,EAAWC,GACvBnB,EAAOkB,KACTlB,EAAOkB,GAAalB,EAAOkB,GAAWG,OAAO,SAASC,GACpD,QAASH,IAASG,OAIxBC,KAAM,SAAcL,EAAWzB,GACzBO,EAAOkB,IACTlB,EAAOkB,GAAWrD,QAAQ,SAASyD,GACjCA,EAAQ7B,aAOZ+B,GAAG,SAASnF,EAAQU,EAAOJ,GACjCI,EAAOJ,QAAU,SAASO,GAKxB,QAASuE,GAAiBC,GACxB,IAAK,GAAIpF,GAAI,EAAGA,EAAIoF,EAAKC,SAAS9E,SAAUP,EAE1C,OADAsF,MAAQF,EAAKC,SAASrF,GACfsF,MAAMC,IACX,IAAK,YACHC,EAAWF,KACX,MAEF,KAAK,WACHG,EAAUH,MAOhB1E,EAAW8C,OAAOiB,GAAG,wBAAyB,SAAS7C,GACrD0D,EAASpC,UAAYtB,EACrB2D,EAAQC,aAAa,MAAO5D,KAtBhC,GACIiB,GAAWyC,EAAUC,EADrBF,EAAK,cA+BT,OALA,YACExC,EAAYU,SAASkC,eAAeJ,GACpC3E,EAAWkC,aAAaC,EAAW,qCAChCG,KAAKiC,MAEHS,WAGHC,GAAG,SAAS9F,EAAQU,EAAOJ,GACjCA,EAAQW,MAAQjB,EAAQ,WAExBM,EAAQY,QAAUlB,EAAQ,eAEvB+F,YAAY,EAAEC,UAAU,IAAIC,GAAG,SAASjG,EAAQU,EAAOJ,GAC1DI,EAAOJ,QAAU,SAASO,GAIxB,QAASuE,GAAiBC,GAGxB,IAAK,GAFDa,GAAcC,EAETlG,EAAI,EAAGA,EAAIoF,EAAKC,SAAS9E,SAAUP,EAE1C,OADAsF,MAAQF,EAAKC,SAASrF,GACfsF,MAAMC,IACX,IAAK,YACHU,EAAeX,KACf,MAEF,KAAK,QACHY,EAAYZ,MAOlBY,EAAU9C,UAAYxC,EAAWc,UACjC,KAAK,GAAI1B,GAAI,EAAGA,EAAIiG,EAAaZ,SAAS9E,SAAUP,EAAG,CACrD,GAAI+B,GAAMkE,EAAaZ,SAASrF,IAChC,SAAU+B,GACRoE,EAAQpE,EAAK,WACX,MAAOnB,GAAWgB,aAAaG,EAAIqE,aAAa,WAEjDrE,IAIP,QAASoE,GAAQpE,EAAKsE,GACpBtE,EAAI2D,aAAa,MAAOW,IAExB,IAAIC,GAAOC,EAAExE,EACbuE,GAAK3B,GAAG,QAAS,WACf,GAAI6B,GAAMD,EAAEE,UAEZF,GAAEX,MAAMc,QAAQ,IAAK,WACnB9F,EAAW8C,OAAOuB,KAAK,wBACAlD,EAAIqE,aAAa,QACxCI,EAAIpE,YAGNoE,EAAItD,KAAK,WACPnB,EAAI2D,aAAa,MAAOW,KACxBC,EAAKK,OAAO,SA/ClB,GACI5D,GADAwC,EAAK,YA0DT,OANA,YACExC,EAAYU,SAASkC,eAAeJ,GACpC3E,EAAWkC,aAAaC,EAAW,iCAChCG,KAAKiC,MAGHS,gBAGE","file":"../scripts.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = function(controllerInterface, model) {\n  var controller = Object.create(controllerInterface);\n  return controller;\n};\n\n},{}],2:[function(require,module,exports){\nexports.title = require(\"./titleController\");\n\nexports.details = require(\"./detailsController\");\n\n},{\"./detailsController\":1,\"./titleController\":3}],3:[function(require,module,exports){\nmodule.exports = function(controllerInterface, model) {\n  var controller = Object.create(controllerInterface);\n  var foxes;\n\n  function getFoxes() {\n    foxes = model.getFoxes();\n    foxes.forEach(function (fox) {\n      fox.display = false;\n    });\n  }\n\n  controller.getTitle = function getTitle() {\n    return model.title;\n  };\n\n  var index = 0;\n  controller.getNextImage = function getNextImage(currImg) {\n    var fox;\n    do {\n      fox = foxes[index];\n      index = (index + 1) % foxes.length;\n    } while (fox.display);\n\n    for (var i = 0; i < foxes.length; ++i) {\n      if (foxes[i].imgUrl == currImg) {\n        foxes[i].display = false;\n        break;\n      }\n    }\n\n    var img = fox.imgUrl;\n    fox.display = true;\n    return img;\n  };\n\n  // Initialization of this instance\n  (function init() {\n    getFoxes();\n  })();\n  return controller;\n}\n\n},{}],4:[function(require,module,exports){\n(function(window, document) {\n  var events = require(\"./pubsub\")(),\n      models = require(\"./models\"),\n      controllers = require(\"./controllers\"),\n      views = require(\"./views\");\n\n  var controllerInterface = {\n    events: events,\n    getFile: getFile,\n    loadTemplate: loadTemplate\n  };\n\n  (function init() {\n    var model, controller, view;\n    model = models.modelFactory();\n\n    for (var prop in controllers) {\n      controller = controllers[prop](controllerInterface, model);\n      view = views[prop](controller);\n    }\n  })();\n\n})(window, document);\n\nfunction getFile(path) {\n  return new Promise(function(resolve, reject) {\n    var xmlhttp = new XMLHttpRequest();\n \n    xmlhttp.onreadystatechange = function() {\n      if (xmlhttp.readyState == 4) {\n        if (xmlhttp.status == 200)\n          resolve(xmlhttp.responseText);\n        else\n          reject(xmlhttp.status);\n      }\n    }\n\n    xmlhttp.open(\"GET\", path);\n    xmlhttp.send();\n  });\n}\n\nfunction loadTemplate(viewGroup, templatePath) {\n  var promise = getFile(templatePath);\n\n  return promise.then(function success(data) {\n    viewGroup.innerHTML = data;\n    return viewGroup;\n\n  }, function error(err) {\n    var msg = \"Failed to load template!\";\n    viewGroup.innerHTML = msg;\n    alert(\"Status: \" + err + \"! \" + msg);\n  });\n}\n\n},{\"./controllers\":2,\"./models\":5,\"./pubsub\":6,\"./views\":8}],5:[function(require,module,exports){\nexports.modelFactory = function() {\n  var path = \"static/img/\";\n  var images = [\n    \"fox0.gif\",\n    \"fox1.jpg\",\n    \"fox2.jpg\",\n    \"fox3.jpg\",\n    \"fox4.jpg\"\n  ];\n\n  var foxes = [];\n  images.forEach(function(img) {\n    var fox = {\n      caption: img.match(/(^.+)\\./)[1],\n      imgUrl: path + img\n    };\n    foxes.push(fox);\n  });\n\n  return {\n    title: \"Welcome To Ashley's Arctic Fox Project\",\n    getFoxes: function getFoxes() {\n      return foxes;\n    }\n  };\n};\n\n},{}],6:[function(require,module,exports){\nmodule.exports = function() {\n  var events = {};\n\n  return {\n    on: function on(eventName, func) {\n      events[eventName] = events[eventName] || [];\n      events[eventName].push(func);\n    },\n    off: function off(eventName, func) {\n      if (events[eventName]) {\n        events[eventName] = events[eventName].filter(function(handler) {\n          return !(func === handler);\n        })\n      }\n    },\n    emit: function emit(eventName, data) {\n      if (events[eventName]) {\n        events[eventName].forEach(function(handler) {\n          handler(data);\n        });\n      }\n    }\n  };\n};\n\n},{}],7:[function(require,module,exports){\nmodule.exports = function(controller) {\n  var id = \"view-details\";\n  var viewGroup, nameView, imgView;\n  \n\n  function onTemplateLoaded(root) {\n    for (var i = 0; i < root.children.length; ++i) {\n      child = root.children[i];\n      switch(child.id) {\n        case \"name-view\":\n          nameView = child;\n          break;\n\n        case \"img-view\":\n          imgView = child;\n          break;\n  \n        default:\n          // Default\n      }\n    }\n    controller.events.on(\"title-picture-clicked\", function(imgUrl) {\n      nameView.innerHTML = imgUrl;\n      imgView.setAttribute(\"src\", imgUrl);\n    }); \n  }\n\n  (function init() {\n    viewGroup = document.getElementById(id);\n    controller.loadTemplate(viewGroup, \"static/views/details/details.html\")\n      .then(onTemplateLoaded);\n  })();\n  return this;\n};\n\n},{}],8:[function(require,module,exports){\nexports.title = require(\"./title\");\n\nexports.details = require(\"./details\");\n\n},{\"./details\":7,\"./title\":9}],9:[function(require,module,exports){\nmodule.exports = function(controller) {\n  var id = \"view-title\";\n  var viewGroup;\n  \n  function onTemplateLoaded(root) {\n    var imgGroupView, titleView;\n  \n    for (var i = 0; i < root.children.length; ++i) {\n      child = root.children[i];\n      switch(child.id) {\n        case \"img-group\":\n          imgGroupView = child;\n          break;\n  \n        case \"title\":\n          titleView = child;\n          break;\n\n        default:\n          // Default\n      }\n    }\n    titleView.innerHTML = controller.getTitle();\n    for (var i = 0; i < imgGroupView.children.length; ++i) {\n      var img = imgGroupView.children[i]; \n      (function(img) {\n        initImg(img, function() {\n          return controller.getNextImage(img.getAttribute(\"src\"));\n        });\n      })(img);\n    }\n  }\n\n  function initImg(img, getPathFunc) {\n    img.setAttribute(\"src\", getPathFunc());\n  \n    var $img = $(img);\n    $img.on(\"click\", function() {\n      var dfd = $.Deferred();\n\n      $(this).fadeOut(500, function() {\n        controller.events.emit(\"title-picture-clicked\",\n                               img.getAttribute(\"src\"));\n        dfd.resolve();\n      });\n\n      dfd.then(function success() {\n        img.setAttribute(\"src\", getPathFunc());\n        $img.fadeIn(500);            \n      })\n    })\n  }\n\n  (function init() {\n    viewGroup = document.getElementById(id);\n    controller.loadTemplate(viewGroup, \"static/views/title/title.html\")\n      .then(onTemplateLoaded);\n  })();\n  \n  return this;\n};\n\n},{}]},{},[4]);\n"]}