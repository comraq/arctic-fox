{"version":3,"sources":["scripts.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","getFile","path","Promise","resolve","reject","xmlhttp","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","send","loadTemplate","viewGroup","templatePath","promise","then","data","innerHTML","err","msg","alert","window","document","events","models","controllers","views","controllerInterface","model","controller","view","modelFactory","prop","./controllers","./models","./pubsub","./views","2","Object","create","3","title","details","info","./detailsController","./infoController","./titleController","4","getInfo","5","getFoxes","foxes","forEach","fox","display","getTitle","index","getNextFox","indexVal","parseInt","isNaN","id","name","imgUrl","facts","sound","6","imgPath","soundPath","dataFile","result","JSON","parse","console","log","7","on","eventName","func","push","off","filter","handler","emit","8","onTemplateLoaded","root","nameView","$","imgView","factsView","backButton","soundButton","pause","currFox","addClass","setAttribute","removeClass","addEventListener","paused","Audio","play","getElementById","this","9","./details","./info","./title","10","listView","fact","children","text","cloneNode","appendChild","popover","imgCaption","11","imgGroupView","titleView","child","img","initImg","getAttribute","getFox","$img","dfd","Deferred","fadeOut","fadeIn"],"mappings":"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","file":"../scripts.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function(window, document) {\n  var events = require(\"./pubsub\")(),\n      models = require(\"./models\"),\n      controllers = require(\"./controllers\"),\n      views = require(\"./views\");\n\n  var controllerInterface = {\n    events: events,\n    getFile: getFile,\n    loadTemplate: loadTemplate\n  };\n\n  (function init() {\n    var model, controller, view;\n\n    models.modelFactory(controllerInterface)\n      .then(function success(data) {\n        model = data;\n\n        for (var prop in controllers) {\n          controller = controllers[prop](controllerInterface, model);\n          view = views[prop](controller);\n        }\n      }, function error(err) {\n        alert(err);\n\n      });\n  })();\n\n})(window, document);\n\nfunction getFile(path) {\n  return new Promise(function(resolve, reject) {\n    var xmlhttp = new XMLHttpRequest();\n \n    xmlhttp.onreadystatechange = function() {\n      if (xmlhttp.readyState == 4) {\n        if (xmlhttp.status == 200)\n          resolve(xmlhttp.responseText);\n        else\n          reject(xmlhttp.status);\n      }\n    }\n\n    xmlhttp.open(\"GET\", path);\n    xmlhttp.send();\n  });\n}\n\nfunction loadTemplate(viewGroup, templatePath) {\n  var promise = getFile(templatePath);\n\n  return promise.then(function success(data) {\n    viewGroup.innerHTML = data;\n    return viewGroup;\n\n  }, function error(err) {\n    var msg = \"Failed to load template!\";\n    viewGroup.innerHTML = msg;\n    alert(\"Status: \" + err + \"! \" + msg);\n  });\n}\n\n},{\"./controllers\":3,\"./models\":6,\"./pubsub\":7,\"./views\":9}],2:[function(require,module,exports){\nmodule.exports = function(controllerInterface, model) {\n  var controller = Object.create(controllerInterface);\n  return controller;\n};\n\n},{}],3:[function(require,module,exports){\nexports.title = require(\"./titleController\");\n\nexports.details = require(\"./detailsController\");\n\nexports.info = require(\"./infoController\");\n\n},{\"./detailsController\":2,\"./infoController\":4,\"./titleController\":5}],4:[function(require,module,exports){\nmodule.exports = function(controllerInterface, model) {\n  var controller = Object.create(controllerInterface);\n\n  controller.getInfo = function getInfo() {\n    return model.getInfo();\n  };\n\n  return controller;\n};\n\n},{}],5:[function(require,module,exports){\nmodule.exports = function(controllerInterface, model) {\n  var controller = Object.create(controllerInterface);\n  var foxes;\n\n  function getFoxes() {\n    foxes = model.getFoxes();\n    foxes.forEach(function (fox) {\n      fox.display = false;\n    });\n  }\n\n  controller.getTitle = function getTitle() {\n    return model.getTitle();\n  };\n\n  var index = 0;\n  controller.getNextFox = function getNextFox(i) {\n    var indexVal = parseInt(i);\n    if (!isNaN(indexVal)) {\n      foxes[indexVal].display = false;\n      index = (indexVal + 1) % foxes.length;\n    }\n\n    var fox, id;\n    do {\n      fox = foxes[index];\n      id = index;\n      index = (index + 1) % foxes.length;\n    } while (fox.display);\n\n    fox.display = true;\n    return {\n      name: fox.name,\n      imgUrl: fox.imgUrl,\n      facts: fox.facts,\n      sound: fox.sound,\n      id: id \n    };\n  };\n\n  // Initialization of this instance\n  (function init() {\n    getFoxes();\n  })();\n  return controller;\n}\n\n},{}],6:[function(require,module,exports){\nexports.modelFactory = function(controller) {\n  var imgPath = \"static/img/\";\n  var soundPath = \"static/sounds/\";\n  var dataFile = \"static/data.json\";\n  var data;\n\n  return controller.getFile(dataFile).then(function success(result) {\n      data = JSON.parse(result);\n      data.foxes.forEach(function(fox) {\n        fox.imgUrl = imgPath + fox.imgUrl;\n        fox.sound = soundPath + fox.sound;\n      });\n\n      data.info.imgUrl = imgPath + data.info.imgUrl;\n\n      return {\n        getTitle: function getTitle() {\n          return data.title;\n        },\n        getFoxes: function getFoxes() {\n          return data.foxes;\n          //return foxes;\n        },\n        getInfo: function getInfo() {\n          return data.info;\n        }\n      };\n\n    }, function error(err) {\n      var msg = \"Failed to Retrieve Data from json!\";\n      console.log(msg);\n\n      throw new Error(msg);\n    });\n};\n\n},{}],7:[function(require,module,exports){\nmodule.exports = function() {\n  var events = {};\n\n  return {\n    on: function on(eventName, func) {\n      events[eventName] = events[eventName] || [];\n      events[eventName].push(func);\n    },\n    off: function off(eventName, func) {\n      if (events[eventName]) {\n        events[eventName] = events[eventName].filter(function(handler) {\n          return !(func === handler);\n        })\n      }\n    },\n    emit: function emit(eventName, data) {\n      if (events[eventName]) {\n        events[eventName].forEach(function(handler) {\n          handler(data);\n        });\n      }\n    }\n  };\n};\n\n},{}],8:[function(require,module,exports){\nmodule.exports = function(controller) {\n  var id = \"view-details\";\n  var viewGroup, nameView, imgView, factsView, backButton, soundButton;\n  var currFox;\n  var sound;\n  \n  function onTemplateLoaded(root) {\n    nameView = $(\"#\" + id + \"-name\")[0];\n    imgView = $(\"#\" + id + \"-img-view\")[0];\n    factsView = $(\"#\" + id + \"-facts-body\")[0];\n    backButton = $(\"#\" + id + \"-back-button\")[0];\n    soundButton = $(\"#\" + id + \"-sound-button\")[0];\n\n    controller.events.on(\"title-picture-clicked\", function(fox) {\n      if (sound)\n        sound.pause();\n\n      currFox = fox;\n      $(viewGroup).addClass(\"view-details-show\");\n\n      nameView.innerHTML = fox.name;\n      imgView.setAttribute(\"src\", fox.imgUrl);\n      factsView.innerHTML = fox.facts;\n\n    }); \n\n    controller.events.on(\"details-closed\", function() {\n      if (sound)\n        sound.pause();\n\n      $(viewGroup).removeClass(\"view-details-show\");\n    });\n\n    soundButton.addEventListener(\"click\", function() {\n      if (!sound || sound.paused) {\n        sound = new Audio(currFox.sound);\n        sound.play();\n      }\n    });\n\n    backButton.addEventListener(\"click\", function() {\n      controller.events.emit(\"details-closed\");\n    });\n  }\n\n  (function init() {\n    viewGroup = document.getElementById(id);\n    controller.loadTemplate(viewGroup, \"app/views/details/details.html\")\n      .then(onTemplateLoaded);\n  })();\n  return this;\n};\n\n},{}],9:[function(require,module,exports){\nexports.title = require(\"./title\");\n\nexports.details = require(\"./details\");\n\nexports.info = require(\"./info\");\n\n},{\"./details\":8,\"./info\":10,\"./title\":11}],10:[function(require,module,exports){\nmodule.exports = function(controller) {\n  var id = \"view-info\";\n  var viewGroup, listView, imgView;\n\n  var info;\n  function onTemplateLoaded(root) {\n    listView = $(\"#\" + id + \"-list\")[0];\n    imgView = $(\"#\" + id + \"-img\")[0];\n    info = controller.getInfo();\n\n    info.facts.forEach(function(fact, i) {\n      var a = listView.children[0];\n      var text = a.innerHTML;\n      console.log(a);\n      if (i > 0) {\n        a = a.cloneNode();\n        a.innerHTML = text;\n        listView.appendChild(a);\n        console.log(a);\n      }\n      a.setAttribute(\"data-content\", fact); \n      $(a).popover();\n    });\n\n    imgView.setAttribute(\"src\", info.imgUrl);\n    imgView.setAttribute(\"title\", info.imgCaption);\n\n    controller.events.on(\"title-picture-clicked\", function(fox) {\n      $(viewGroup).addClass(\"view-info-hide\");\n    });\n\n    controller.events.on(\"details-closed\", function() {\n      $(viewGroup).removeClass(\"view-info-hide\");\n    });\n  }\n\n  (function init() {\n    viewGroup = document.getElementById(id);\n    controller.loadTemplate(viewGroup, \"app/views/info/info.html\")\n      .then(onTemplateLoaded);\n  })();\n  return this;\n};\n\n},{}],11:[function(require,module,exports){\nmodule.exports = function(controller) {\n  var id = \"view-title\";\n  var viewGroup;\n  \n  function onTemplateLoaded(root) {\n    var imgGroupView, titleView;\n  \n    for (var i = 0; i < root.children.length; ++i) {\n      child = root.children[i];\n      switch(child.id) {\n        case \"img-group\":\n          imgGroupView = child;\n          break;\n  \n        case \"title\":\n          titleView = child;\n          break;\n\n        default:\n          // Default\n      }\n    }\n    titleView.innerHTML = controller.getTitle();\n    for (var i = 0; i < imgGroupView.children.length; ++i) {\n      var img = imgGroupView.children[i]; \n      (function(img) {\n        initImg(img, function() {\n          return controller.getNextFox(img.getAttribute(\"fox-id\"));\n        });\n      })(img);\n    }\n  }\n\n  function initImg(img, getFox) {\n    var fox = getFox();\n    img.setAttribute(\"src\", fox.imgUrl);\n    img.setAttribute(\"fox-id\", fox.id);\n  \n    var $img = $(img);\n    $img.on(\"click\", function() {\n      var dfd = $.Deferred();\n\n      $(this).fadeOut(500, function() {\n        controller.events.emit(\"title-picture-clicked\", fox);\n        dfd.resolve();\n      });\n\n      dfd.then(function success() {\n        fox = getFox();\n        img.setAttribute(\"src\", fox.imgUrl);\n        img.setAttribute(\"fox-id\", fox.id);\n        $img.fadeIn(500);            \n      })\n    })\n  }\n\n  (function init() {\n    viewGroup = document.getElementById(id);\n    controller.loadTemplate(viewGroup, \"app/views/title/title.html\")\n      .then(onTemplateLoaded);\n  })();\n  \n  return this;\n};\n\n},{}]},{},[1]);\n"]}